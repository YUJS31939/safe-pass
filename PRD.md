## Safe Pass 密码生成器 PRD（产品需求文档）

### 版本信息
- **版本**: v1.0-MVP
- **作者**: 产品/研发
- **最后更新**: 2025-09-03

## 1. 概述
- **产品定位**: 一个简单、安全、可离线使用的密码生成网站，帮助用户快速生成高强度密码或通行短语，并支持自定义规则、预设与历史记录。
- **目标用户**: 普通网民、开发者、企业员工、安全从业者。
- **核心价值**: 降低设置强密码的门槛，减少弱口令与撞库风险；在保证安全的前提下，提升效率与可用性。
- **主要场景**: 新注册/修改密码时生成强口令；为不同网站快速生成不同密码；批量生成测试或临时访问密码。

## 2. 目标与非目标
- **目标**
  - 提供高强度、可定制的随机密码与通行短语生成能力（离线可用）。
  - 直观的强度评估与安全提示，帮助用户理解密码质量。
  - 常用规则的一键预设与历史记录，提升复用与效率。
  - 良好的可访问性（无障碍）与移动端体验。
- **非目标（MVP 外）**
  - 账号系统、云端同步与团队共享。
  - 浏览器扩展、原生 App。
  - 与第三方密码管理器的深度联动（如自动填充）。

## 3. 竞品与差异化
- **竞品**: 1Password/Bitwarden/LastPass 生成器、随机密码网站、操作系统内置生成器。
- **差异化**
  - 强调本地生成与隐私最小化：默认不上传、不留存个人数据。
  - 提供更细粒度的规则定制与预设分享（URL/文本导入导出）。
  - PWA 离线可用、轻量快速、开源透明（可选）。

## 4. 用户画像与场景
- **画像 A（普通用户）**: 想设置安全密码但不懂规则，偏好一键生成与清晰提示。
- **画像 B（开发/安全人员）**: 需要严格控制字符集、长度、批量导出与可重复性。
- **典型场景**
  - A1: 在注册网站时，打开生成器，一键生成并复制；看到强度足够后使用。
  - A2: 为同一网站生成新密码，避免与旧密码类似。
  - B1: 为测试环境批量生成 100 条 12 位复杂密码，导出 CSV。
  - B2: 制作一个团队约定的生成预设并分享配置给同事。

## 5. 范围与里程碑
- **MVP 范围**
  - 随机密码、口令短语（Passphrase）两种生成模式。
  - 可配置长度、字符集（大写/小写/数字/符号），排除字符，避免易混淆字符。
  - 保证每类至少一个字符、禁止连续重复、避免常见模式（可选）。
  - 实时强度评估与文案提示（基于类似 zxcvbn 的评分）。
  - 一键复制、可见/隐藏、重新生成。
  - 预设管理（创建/编辑/应用），本地持久化；最近使用历史（可清除）。
  - 轻量主题（含暗色）、响应式、PWA（基础离线缓存）。
  - 隐私声明与开源许可（如适用）。
- **后续（M2/M3）**
  - 批量生成与导出 CSV/JSON。
  - 预设分享与导入导出（URL/文件）。
  - 更多模式：PIN、可读助记密码（字典+分隔符）、Diceware。
  - 浏览器扩展与快捷键深度集成；高阶安全校验策略。

## 6. 功能需求（FRD）
### 6.1 生成模式
- **随机密码模式**
  - 可选长度范围：8–64（默认 16，可在设置中扩展至 128）。
  - 选项：小写 a–z、大写 A–Z、数字 0–9、符号集合（默认 !@#$%^&*_-+=?）。
  - 可配置：排除特定字符、避免相似字符（O/0、l/1/I 等）。
  - 约束：
    - 至少包含所选字符类中的每一类（若勾选）。
    - 限制连续重复字符（如最多 2 个）。
    - 避免常见键盘序列（如 qwerty，若勾选）。
- **通行短语模式（Passphrase）**
  - 词典来源：本地内置常见安全词表（多语言，MVP 可用英文）。
  - 词数：3–8（默认 4）。
  - 分隔符：连字符、空格、下划线、自定义；可随机大小写/首字母大写。
  - 可插入数字与符号（位置与数量可选）。

### 6.2 强度评估与提示
- 实时评分（0–4）与颜色/文案反馈。
- 展示估计破解时间与改进建议（如增加长度、增加字符类）。
- 对通行短语给出熵值估算与直观提示。

### 6.3 交互与便捷性
- 一键复制到剪贴板；复制成功反馈；可隐藏/显示。
- 快捷键：生成（Cmd/Ctrl+G）、复制（Cmd/Ctrl+C）、切换可见（Cmd/Ctrl+H）。
- 历史记录：显示最近 N 条（默认 10），可清除；不自动持久化密码文本（可配置）。
- 预设：保存当前配置为命名预设；应用/删除；设为默认。

### 6.4 设置与个性化
- 主题：跟随系统/明亮/暗黑。
- 多语言：简体中文、英文（可扩展）。
- 默认长度、默认模式、默认字符集。
- 是否允许在历史中保留明文（默认关闭）。

### 6.5 PWA 与离线
- 安装到主屏；离线可用核心功能（生成、复制、预设）。
- 资源缓存策略：静态资源预缓存，词典按需缓存。

## 7. 非功能需求（NFR）
- **安全**
  - 使用 Web Crypto API 的 CSPRNG（crypto.getRandomValues）；绝不使用 Math.random。
  - 默认不上传密码及生成参数；无远端日志记录敏感数据。
  - 强 CSP、SRI；最小第三方依赖；开源依赖定期审计与锁定版本。
- **性能**
  - 首屏可交互 TTI < 1s（现代手机/桌面）；核心包 < 150KB gzip（MVP 目标）。
  - Lighthouse Performance/Best Practices/SEO/Accessibility ≥ 95。
- **可用性与无障碍**
  - 遵循 WCAG 2.1 AA；键盘可达，ARIA 标签完整；对比度合规。
- **兼容性**
  - 支持 Chrome/Firefox/Safari/Edge 最近两个大版本；iOS/Android 主流浏览器。

## 8. 信息架构与页面
- **站点地图**
  - 首页（生成器）
  - 历史与预设
  - 设置
  - 帮助/关于与隐私
- **页面要素（MVP）**
  - 顶部栏：Logo/标题、主题切换、语言切换、设置入口。
  - 生成区：模式切换 Tab、参数表单、生成结果卡片（显示/复制/再生成）。
  - 评估区：强度条、评分、建议文案、熵值/估算时间。
  - 侧栏/页内：预设快捷应用、最近使用。
  - 页脚：版本、开源仓库链接（如适用）、隐私声明。

## 9. 交互流程（示例）
- **首次访问**
  1) 打开网站 → 选择模式（默认随机密码）
  2) 查看默认参数 → 点击“生成” → 得到结果
  3) 强度显示与建议 → 一键复制 → 完成
- **创建预设**
  1) 调整参数 → 命名为“工作账户强密码” → 保存
  2) 下次访问从预设快速应用 → 一键生成
- **通行短语**
  1) 切换到 Passphrase → 选择 4 词、分隔符 “-”
  2) 允许随机大小写与插入数字 → 生成并复制

## 10. 数据与存储
- **本地存储（LocalStorage/IndexedDB）**
  - presets: [{ id, name, type, params, createdAt, updatedAt }]
  - settings: { theme, language, defaults }
  - history: 仅存放元数据（时间、参数哈希、复制次数）；明文密码默认不保存
- **遥测与分析（可选且匿名）**
  - 事件：生成触发、复制成功、预设应用；不携带敏感内容
  - 可关闭分析收集

## 11. 安全设计细节
- **随机源**: 使用 Web Crypto API 生成均匀分布随机字节；字符选择经均匀映射并避免取模偏差。
- **熵估算**: 对随机密码基于字符表大小与长度估算 bits 熵；对通行短语基于词表大小与词数估算。
- **威胁建模**
  - XSS/依赖注入 → 严格 CSP、SRI、依赖审计与 DOM 隔离。
  - 剪贴板风险 → 明确提示并提供手动输入选项；复制后短暂清空（可选）。
  - 侧信道/历史留存 → 默认不存明文；提供“安全清除”操作。

## 12. 文案与本地化
- 简体中文为默认；英文可切换。
- 关键文案：强度等级（弱/一般/强/很强）、建议提示、复制成功/失败反馈。

## 13. 指标与验收标准
- **核心指标**
  - 当日首次访问至成功复制转化率 ≥ 70%
  - 平均生成时延 < 50ms（单次）
  - Lighthouse 总分 ≥ 95
- **验收标准（MVP）**
  - 支持随机密码与通行短语两种模式并可用。
  - 可配置长度/字符集/排除字符/避免相似字符。
  - 保证每类至少一个、限制重复（如启用时生效）。
  - 实时强度评分与清晰文案提示。
  - 一键复制具有成功反馈；可见/隐藏切换无可访问性问题。
  - 预设可创建/应用/删除；数据持久化本地；默认不存明文密码。
  - 主题与语言切换工作正常；PWA 安装与离线生成可用。
  - 安全：随机源为 Web Crypto；项目含 CSP 与依赖锁定。

## 14. 里程碑与时间
- **MVP（2–3 周）**: 核心生成器、强度评估、预设与本地存储、PWA、主题/语言。
- **M2（+2 周）**: 批量生成与导出、预设分享、更多模式。
- **M3（+2 周）**: 浏览器扩展、可观测性完善、A/B 文案优化。

## 15. 风险与对策
- 依赖体积膨胀 → 采用原生 API 与轻量库，启用分包与压缩。
- 词典版权/体积 → 选用开源词表与按需加载。
- 用户误解数据留存 → 明确隐私说明与默认策略；首次引导提示。

## 16. 开放问题
- 是否开源与许可证类型？
- 是否支持可重复性种子（seed）生成模式？（默认不暴露）
- 是否提供团队共享的最小实现（仅预设配置共享）？

## 17. 参考与附录
- NIST SP 800-63B（数字身份指南）
- OWASP ASVS/Top 10（前端与依赖安全）
- zxcvbn 强度评估方法
